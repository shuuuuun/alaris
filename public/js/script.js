!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,1],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[1,1,1,0],[0,0,0,0]]]},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.BLOCK_LIST=n.GAMEOVER_BLOCK=n.CLEARLINE_BLOCK=n.KEYS=n.BG_COLOR=n.START_Y=n.START_X=n.SPEEDUP_RATE=n.DEFAULT_TICK_INTERVAL=n.RENDER_INTERVAL=n.NEXT_HEIGHT=n.NEXT_WIDTH=n.HEIGHT=n.WIDTH=n.LOGICAL_ROWS=n.HIDDEN_ROWS=n.NUMBER_OF_BLOCK=n.BLOCK_SIZE=n.ROWS=n.COLS=void 0;var r=e("./SHAPE_LIST_4"),s=i(r),o=n.COLS=10,a=n.ROWS=10,c=n.BLOCK_SIZE=35,l=n.NUMBER_OF_BLOCK=4,u=n.HIDDEN_ROWS=l;n.LOGICAL_ROWS=a+u,n.WIDTH=c*o,n.HEIGHT=c*a,n.NEXT_WIDTH=c*l,n.NEXT_HEIGHT=c*l,n.RENDER_INTERVAL=30,n.DEFAULT_TICK_INTERVAL=500,n.SPEEDUP_RATE=10,n.START_X=Math.floor((o-l)/2),n.START_Y=0,n.BG_COLOR="#888",n.KEYS={37:"left",39:"right",40:"down",38:"rotate",32:"rotate"},n.CLEARLINE_BLOCK={id:7,color:"#aaa"},n.GAMEOVER_BLOCK={id:8,color:"#777"},n.BLOCK_LIST=[{id:0,color:"#FF6666",shape:s.default[0]},{id:1,color:"#FFCC66",shape:s.default[1]},{id:2,color:"#FFFF66",shape:s.default[2]},{id:3,color:"#CCFF66",shape:s.default[3]},{id:4,color:"#66FF66",shape:s.default[4]},{id:5,color:"#66FFCC",shape:s.default[5]},{id:6,color:"#66FFFF",shape:s.default[6]}]},{"./SHAPE_LIST_4":1}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=(new Date,e-new Date);return!(!t||t<0)&&(console.log(e,t+" milliseconds after."),setTimeout(function(){console.log("it's time!!!");var e=o(u),t=function t(){console.log(d.sumOfClearLines),d.sumOfClearLines>=4&&(e.stop(),d.off("tick",t))};d.on("tick",t)},t),!0)}function s(e,t){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(0!==n.status&&200!==n.status||l.decodeAudioData(n.response,function(e){t(e)}))},n.open("GET",e,!0),n.send("")}function o(e){var t=l.createBufferSource();return t.buffer=e,t.connect(l.destination),t.start(0),t}var a=e("./modules/Pentrix"),c=i(a);window.AudioContext=window.AudioContext||window.webkitAudioContext;var l=new AudioContext,u=null;s("./sound/su715.mp3",function(e){u=e});var h=(document.querySelector(".container"),document.querySelector(".js-input-time")),f=document.querySelector(".js-button-set-alarm"),v=document.getElementById("game-root"),d=new c.default({rootElement:v}),p=new Date,m=("0"+p.getHours()).slice(-2),_=("0"+p.getMinutes()).slice(-2),y=("0"+p.getSeconds()).slice(-2);h.value=m+":"+_+":"+y,f.addEventListener("click",function(){var e=h.value,t=e.split(":")[0]||0,n=e.split(":")[1]||0,i=e.split(":")[2]||0,s=new Date;s.setHours(t),s.setMinutes(n),s.setSeconds(i),console.log(s,t,n,i);var o=r(s);o&&(f.setAttribute("disabled","disabled"),h.setAttribute("disabled","disabled"))}),d.once("gamestart",function(){}),d.on("gamequit",function(){d.newGame()}),d.newGame()},{"./modules/Pentrix":4}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("jquery-deferred"),l=i(c),u=e("eventemitter2"),h=i(u),f=e("./Util"),v=i(f),d=e("./TouchController"),p=i(d),m=e("../constants"),_=m.BLOCK_LIST.concat([m.CLEARLINE_BLOCK,m.GAMEOVER_BLOCK]),y=Array.apply(null,Array(m.COLS)).map(function(){return 0}),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.rootElm=e.rootElement||document.createElement("div"),n.cnvs=e.canvas||document.createElement("canvas"),n.ctx=n.cnvs.getContext("2d"),n.cnvsNext=e.canvasNext||document.createElement("canvas"),n.ctxNext=n.cnvsNext.getContext("2d"),n.rootElm.appendChild(n.cnvs),n.initCanvasSize(),e.disableFocusControls||n.initBlurEvent(),e.disableKey||n.initKeyEvent(),e.disableTouch||n.initTouchEvent(),n}return o(t,e),a(t,[{key:"initCanvasSize",value:function(){this.cnvs.style.width=m.WIDTH+"px",this.cnvs.style.height=m.HEIGHT+"px",this.cnvs.width=2*m.WIDTH,this.cnvs.height=2*m.HEIGHT,this.ctx.scale(2,2),this.ctx.strokeStyle=m.BG_COLOR,this.cnvsNext.style.width=m.NEXT_WIDTH+"px",this.cnvsNext.style.height=m.NEXT_HEIGHT+"px",this.cnvsNext.width=2*m.NEXT_WIDTH,this.cnvsNext.height=2*m.NEXT_HEIGHT,this.ctxNext.scale(2,2),this.ctxNext.strokeStyle=m.BG_COLOR}},{key:"initBlurEvent",value:function(){var e=this;window.addEventListener("blur",function(){e.pauseGame()},!1),window.addEventListener("focus",function(){e.resumeGame()},!1)}},{key:"initKeyEvent",value:function(){var e=this;document.addEventListener("keydown",function(t){"undefined"!=typeof m.KEYS[t.keyCode]&&(t.preventDefault(),e.handleMethod(m.KEYS[t.keyCode]))},!1)}},{key:"initTouchEvent",value:function(){var e=this,t=new p.default({element:this.cnvs}),n=void 0,i=void 0,r=!1,s=!1;t.on("touchstart",function(e){n=e.touchStartX,i=e.touchStartY,r=!0,s=!1}),t.on("touchmove",function(t){var o=t.touchX-n,a=t.touchY-i,c=o/m.BLOCK_SIZE|0,l=a/m.BLOCK_SIZE|0;if(!s){for(;c;){var u=c/Math.abs(c);if(!e.validate(u,0))break;e.currentBlock.x+=u,c-=u,n=t.touchX}for(;l>0&&e.validate(0,1);)e.currentBlock.y++,l--,i=t.touchY;r=!1}}),t.on("touchend",function(t){r&&e.rotateBlock()}),this.on("freeze",function(){s=!0})}},{key:"handleMethod",value:function(e){switch(e){case"left":this.moveBlockLeft();break;case"right":this.moveBlockRight();break;case"down":this.moveBlockDown();break;case"rotate":this.rotateBlock()}}},{key:"newGame",value:function(){this.initGame(),this.startGame()}},{key:"initGame",value:function(){clearTimeout(this.tickId),this.stopRender(),this.isPlayng=!1,this.lose=!1,this.tickInterval=m.DEFAULT_TICK_INTERVAL,this.sumOfClearLines=0,this.score=0,this.frameCount=0,this.initBoard(),this.initBlock(),this.createNextBlock(),this.render(),this.emit("gameinit")}},{key:"startGame",value:function(){this.isPlayng=!0,this.createCurrentBlock(),this.createNextBlock(),this.startRender(),this.emit("gamestart"),this.tick()}},{key:"initBoard",value:function(){this.board=[];for(var e=0;e<m.LOGICAL_ROWS;++e){this.board[e]=[];for(var t=0;t<m.COLS;++t)this.board[e][t]=0}}},{key:"initBlock",value:function(){this.nextBlock=this.createBlock(0),this.currentBlock=this.createBlock(0),this.currentBlock.x=m.START_X,this.currentBlock.y=m.START_Y}},{key:"createBlock",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=m.BLOCK_LIST[e]||{},n=t.shape,i=Object.assign({},m.BLOCK_LIST[e],{shape:[],x:0,y:0}),r=0;r<m.NUMBER_OF_BLOCK;++r){i.shape[r]=[];for(var s=0;s<m.NUMBER_OF_BLOCK;++s)i.shape[r][s]=n[r][s]||0}return this.emit("newblockcreated"),i}},{key:"createCurrentBlock",value:function(){this.nextBlock||this.createNextBlock(),this.currentBlock=this.nextBlock,this.currentBlock.x=m.START_X,this.currentBlock.y=m.START_Y,this.emit("currentblockcreated")}},{key:"createNextBlock",value:function(){var e=Math.floor(Math.random()*m.BLOCK_LIST.length);this.nextBlock=this.createBlock(e),this.emit("nextblockcreated")}},{key:"tick",value:function(){var e=this;if(clearTimeout(this.tickId),!this.moveBlockDown()){if(this.freeze(),this.clearLines(),this.checkGameOver())return this.emit("gameover"),this.quitGame().then(function(){}),!1;this.frameCount++,this.createCurrentBlock(),this.createNextBlock()}this.tickId=setTimeout(function(){return e.tick()},this.tickInterval),this.emit("tick")}},{key:"quitGame",value:function(){var e=this,t=l.default.Deferred();return this.gameOverEffect().then(function(){e.isPlayng=!1,e.emit("gamequit"),t.resolve()}),t.promise()}},{key:"pauseGame",value:function(){clearTimeout(this.tickId),this.stopRender()}},{key:"resumeGame",value:function(){var e=this;this.isPlayng&&(this.tickId=setTimeout(function(){return e.tick()},this.tickInterval),this.startRender())}},{key:"freeze",value:function(){for(var e=0;e<m.NUMBER_OF_BLOCK;++e)for(var t=0;t<m.NUMBER_OF_BLOCK;++t){var n=t+this.currentBlock.x,i=e+this.currentBlock.y;!this.currentBlock.shape[e][t]||i<0||(this.board[i][n]=this.currentBlock.shape[e][t]?this.currentBlock.id+1:0)}this.emit("freeze")}},{key:"clearLines",value:function(){var e=this,t=0,n=[],i=l.default.Deferred();i.resolve();for(var r=function(t,n){return function(){var i=l.default.Deferred();return e.board[n][t]=m.CLEARLINE_BLOCK.id+1,i.resolve(),i.promise()}},s=function(){return function(){var t=l.default.Deferred();if(n.length)return n.reverse().forEach(function(t){e.board.splice(t,1),e.board.unshift(y)}),t.resolve(),t.promise()}},o=m.LOGICAL_ROWS-1;o>=0;--o){var a=this.board[o].every(function(e){return 0!==e});if(a){n.push(o),t++,this.sumOfClearLines++,this.tickInterval-=m.SPEEDUP_RATE;for(var c=0;c<m.COLS;++c)this.board[o][c]&&(i=i.then(r(c,o)).then(v.default.sleep(10)))}}i.then(s()),this.score+=t<=1?t:Math.pow(2,t),t>0&&this.emit("clearline",n)}},{key:"gameOverEffect",value:function(){var e=this,t=l.default.Deferred();t.resolve();for(var n=function(t,n){return function(){var i=l.default.Deferred();return e.board[n][t]=m.GAMEOVER_BLOCK.id+1,e.emit("gameOverEffectTick"),i.resolve(),i.promise()}},i=0;i<m.LOGICAL_ROWS;++i)for(var r=0;r<m.COLS;++r)this.board[i][r]&&(t=t.then(n(r,i)).then(v.default.sleep(10)));return this.emit("gameOverEffect"),t.then(v.default.sleep(500)).promise()}},{key:"moveBlockLeft",value:function(){var e=this.validate(-1,0);return e&&--this.currentBlock.x,e}},{key:"moveBlockRight",value:function(){var e=this.validate(1,0);return e&&++this.currentBlock.x,e}},{key:"moveBlockDown",value:function(){var e=this.validate(0,1);return e&&++this.currentBlock.y,e}},{key:"rotateBlock",value:function(){var e=Object.assign({},this.currentBlock);e.shape=this.rotate(this.currentBlock.shape);var t=this.validate(0,0,e);return t&&(this.currentBlock=e),t}},{key:"rotate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentBlock.shape,t=[],n=0;n<m.NUMBER_OF_BLOCK;++n){t[n]=[];for(var i=0;i<m.NUMBER_OF_BLOCK;++i)t[n][i]=e[m.NUMBER_OF_BLOCK-1-i][n]}return t}},{key:"rotateBoard",value:function(e){for(var t=[],n=0;n<m.ROWS;++n){t[n]=[];for(var i=0;i<m.COLS;++i)t[n][i]=this.board[m.COLS-1-i+m.HIDDEN_ROWS][n]}for(var r=0;r<m.HIDDEN_ROWS;++r)t.unshift(y);return this.board=t,t}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentBlock,i=n.x+e,r=n.y+t,s=0;s<m.NUMBER_OF_BLOCK;++s)for(var o=0;o<m.NUMBER_OF_BLOCK;++o)if(n.shape&&n.shape[s][o]){var a=o+i,c=s+r,l=a<0,u=a>=m.COLS,h=c>=m.LOGICAL_ROWS,f="undefined"==typeof this.board[c]||"undefined"==typeof this.board[c][a],v=!f&&!!this.board[c][a];if(l||u||h||f||v)return!1}return!0}},{key:"checkGameOver",value:function(){for(var e=!0,t=0;t<m.NUMBER_OF_BLOCK;++t)for(var n=0;n<m.NUMBER_OF_BLOCK;++n){var i=(n+this.currentBlock.x,t+this.currentBlock.y);if(i>=m.HIDDEN_ROWS){e=!1;break}}return e}},{key:"startRender",value:function(){var e=this;this.renderId=setInterval(function(){return e.render()},m.RENDER_INTERVAL)}},{key:"stopRender",value:function(){clearInterval(this.renderId)}},{key:"render",value:function(){this.ctx.clearRect(0,0,m.WIDTH,m.HEIGHT),this.ctxNext.clearRect(0,0,m.NEXT_WIDTH,m.NEXT_HEIGHT),this.ctx.fillStyle=m.BG_COLOR,this.ctx.fillRect(0,0,m.WIDTH,m.HEIGHT),this.ctxNext.fillStyle=m.BG_COLOR,this.ctxNext.fillRect(0,0,m.NEXT_WIDTH,m.NEXT_HEIGHT),this.renderBoard(),this.renderCurrentBlock(),this.renderNextBlock()}},{key:"renderBoard",value:function(){for(var e=0;e<m.COLS;++e)for(var t=0;t<m.ROWS;++t){var n=e,i=t+m.HIDDEN_ROWS,r=this.board[i][n]-1;!this.board[i][n]||isNaN(r)||r<0||this.drawBlock(e,t,r)}}},{key:"renderCurrentBlock",value:function(){if(this.currentBlock.shape&&this.currentBlock.shape.length)for(var e=0;e<m.NUMBER_OF_BLOCK;++e)for(var t=0;t<m.NUMBER_OF_BLOCK;++t){var n=this.currentBlock.id;if(!(!this.currentBlock.shape[e][t]||isNaN(n)||n<0)){var i=t+this.currentBlock.x,r=e+this.currentBlock.y-m.HIDDEN_ROWS;this.drawBlock(i,r,n)}}}},{key:"renderNextBlock",value:function(){if(this.nextBlock.shape&&this.nextBlock.shape.length)for(var e=0;e<m.NUMBER_OF_BLOCK;++e)for(var t=0;t<m.NUMBER_OF_BLOCK;++t){var n=this.nextBlock.id;!this.nextBlock.shape[e][t]||isNaN(n)||n<0||this.drawNextBlock(t,e,n)}}},{key:"drawBlock",value:function(e,t,n){if(_[n]){var i=m.BLOCK_SIZE*e,r=m.BLOCK_SIZE*t,s=m.BLOCK_SIZE;this.ctx.fillStyle=_[n].color,this.ctx.fillRect(i,r,s,s),this.ctx.strokeRect(i,r,s,s)}}},{key:"drawNextBlock",value:function(e,t,n){if(_[n]){var i=m.BLOCK_SIZE*e,r=m.BLOCK_SIZE*t,s=m.BLOCK_SIZE;this.ctxNext.fillStyle=_[n].color,this.ctxNext.fillRect(i,r,s,s),this.ctxNext.strokeRect(i,r,s,s)}}}]),t}(h.default);n.default=E},{"../constants":2,"./TouchController":5,"./Util":6,eventemitter2:7,"jquery-deferred":9}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("events"),l=i(c),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.element=e.element||document,n.touchstartElement=e.touchstartElement||n.element,n.touchmoveElement=e.touchmoveElement||n.element,n.touchendElement=e.touchendElement||n.element,n.doubleTapDelay=e.doubleTapDelay||500,n.holdingDelay=e.holdingDelay||1e3,n.watchInterval=e.watchInterval||100,n.touchSupport="ontouchstart"in window,n.touchstart=n.touchSupport?"touchstart":"mousedown",n.touchmove=n.touchSupport?"touchmove":"mousemove",n.touchend=n.touchSupport?"touchend":"mouseup",n.deltaX=0,n.deltaY=0,n.moveX=0,n.moveY=0,n.defineEventListener(),n.setEvent(),n}return o(t,e),a(t,[{key:"setEvent",value:function(){this.touchstartElement.addEventListener(this.touchstart,this.onTouchStart,!1),this.touchmoveElement.addEventListener(this.touchmove,this.onTouchMove,!1),this.touchendElement.addEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"dispose",value:function(){this.touchstartElement.removeEventListener(this.touchstart,this.onTouchStart,!1),this.touchmoveElement.removeEventListener(this.touchmove,this.onTouchMove,!1),this.touchendElement.removeEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"defineEventListener",value:function(){var e=this,t=void 0,n=void 0,i=function(){clearInterval(t),clearTimeout(n)},r=function(){i(),n=setTimeout(function(){t=setInterval(function(){e.emit("touchholding",e)},e.watchInterval)},e.holdingDelay)};this.onTouchStart=function(t){t.preventDefault(),t.stopPropagation(),e.isDoubleTap=e.isTap,e.isDragging=!0,e.isTap=!0,e.touchStartTime=Date.now(),e.touchStartX=e.touchSupport?t.touches[0].pageX:t.pageX,e.touchStartY=e.touchSupport?t.touches[0].pageY:t.pageY,r(),e.emit("touchstart",{touchStartTime:e.touchStartTime,touchStartX:e.touchStartX,touchStartY:e.touchStartY})},this.onTouchMove=function(t){e.isDragging&&(i(),e.lasttouchX=e.touchX||e.touchStartX,e.lasttouchY=e.touchY||e.touchStartY,e.touchX=e.touchSupport?t.touches[0].pageX:t.pageX,e.touchY=e.touchSupport?t.touches[0].pageY:t.pageY,e.deltaX=e.touchX-e.lasttouchX,e.deltaY=e.touchY-e.lasttouchY,e.moveX=e.touchX-e.touchStartX,e.moveY=e.touchY-e.touchStartY,e.isTap=e.isDoubleTap=!1,r(),e.emit("touchmove",{lasttouchX:e.lasttouchX,lasttouchY:e.lasttouchY,touchX:e.touchX,touchY:e.touchY,deltaX:e.deltaX,deltaY:e.deltaY,moveX:e.moveX,moveY:e.moveY}))},this.onTouchEnd=function(t){e.isDragging=!1,i(),e.elapsedTime=Date.now()-e.touchStartTime,e.touchEndX=e.touchX,e.touchEndY=e.touchY,e.emit("touchend",{elapsedTime:e.elapsedTime,touchEndX:e.touchEndX,touchEndY:e.touchEndY,moveX:e.moveX,moveY:e.moveY,isTap:e.isTap,isDoubleTap:e.isDoubleTap}),e.touchX=e.touchY=null,e.moveX=e.moveY=0,setTimeout(function(){e.isTap=e.isDoubleTap=!1},e.doubleTapDelay)}}}]),t}(l.default);n.default=u},{events:8}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=e("jquery-deferred"),s=i(r);window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){var t=window.setTimeout(e,1e3/60);return t},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(e){window.clearTimeout(e)};var o={TRANSITIONEND:"transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd oTransitionEnd",ANIMATIONEND:"animationend webkitAnimationEnd mozAnimationEnd msAnimationEnd oAnimationEnd",getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},throttle:function(e,t){var n=!1,i=function(i){n||(n=!0,setTimeout(function(){n=!1,e(i)},t))};return i},debounce:function(e,t){var n,i=function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)};return i},async:function(e){!function t(n){e[n]&&e[n](function(){t(n+1)})}(0)},delay:function(e){return function(t){setTimeout(t,e)}},sleep:function(e){return function(){var t=s.default.Deferred();return setTimeout(function(){t.resolve()},e),t.promise()}},zeroPadding:function(e,t){return(new Array(t).join("0")+e).slice(-t)},getQueryString:function(){var e={},t=window.location.search;if(t.length>1)for(var n=t.substring(1),i=n.split("&"),r=0;r<i.length;r++){var s=i[r].split("="),o=decodeURIComponent(s[0]),a=decodeURIComponent(s[1]);e[o]=a}return e},getUserAgent:function(){return o.ua={},o.ua.name=window.navigator.userAgent.toLowerCase(),o.ua.isSP=/ipod|iphone|ipad|android/i.test(o.ua.name),o.ua.isPC=!o.ua.isSP,o.ua.isIOS=/ipod|iphone|ipad/i.test(o.ua.name),o.ua.isAndroid=/android/.test(o.ua.name),o.ua.isIE=/msie|trident/i.test(o.ua.name),o.ua.isIE8=/msie 8/.test(o.ua.name),o.ua.isIE9=/msie 9/.test(o.ua.name),o.ua.isIE10=/msie 10/.test(o.ua.name),o.ua.isMac=/macintosh/.test(o.ua.name),o.ua.isChrome=/chrome/.test(o.ua.name),o.ua.isFirefox=/firefox/.test(o.ua.name),o.ua.isSafari=/safari/.test(o.ua.name),o.ua.isMacSafari=o.ua.isSafari&&o.ua.isMac&&!o.ua.isChrome,o.ua.isSP&&(document.body.className+=" isSP"),o.ua.isPC&&(document.body.className+=" isPC"),o.ua}};t.exports=o},{"jquery-deferred":9}],7:[function(e,t,n){!function(e){function i(){this._events={},this._conf&&r.call(this,this._conf)}function r(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._events.maxListeners=t.maxListeners!==e?t.maxListeners:u,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=u}function s(e,t){var n="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(n+=" Event name: %s.",console.error(n,e,t)):console.error(n,e),console.trace&&console.trace()}function o(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,r.call(this,e)}function a(e,t,n,i){if(!n)return[];var r,s,o,c,l,u,h,f=[],v=t.length,d=t[i],p=t[i+1];if(i===v&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,s=n._listeners.length;r<s;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&(f=f.concat(a(e,t,n[o],i+1)));return f}if("**"===d){h=i+1===v||i+2===v&&"*"===p,h&&n._listeners&&(f=f.concat(a(e,t,n,v)));for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&("*"===o||"**"===o?(n[o]._listeners&&!h&&(f=f.concat(a(e,t,n[o],v))),f=f.concat(a(e,t,n[o],i))):f=o===p?f.concat(a(e,t,n[o],i+2)):f.concat(a(e,t,n[o],i)));return f}f=f.concat(a(e,t,n[d],i+1))}if(c=n["*"],c&&a(e,t,c,i+1),l=n["**"])if(i<v){l._listeners&&a(e,t,l,v);for(o in l)"_listeners"!==o&&l.hasOwnProperty(o)&&(o===p?a(e,t,l[o],i+2):o===d?a(e,t,l[o],i+1):(u={},u[o]=l[o],a(e,t,{"**":u},i+1)))}else l._listeners?a(e,t,l,v):l["*"]&&l["*"]._listeners&&a(e,t,l["*"],v);return f}function c(t,n){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,r=t.length;i+1<r;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var o=this.listenerTree,a=t.shift();a!==e;){if(o[a]||(o[a]={}),o=o[a],0===t.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(n),!o._listeners.warned&&this._events.maxListeners>0&&o._listeners.length>this._events.maxListeners&&(o._listeners.warned=!0,s.call(this,o._listeners.length,a))):o._listeners=n,!0;a=t.shift()}return!0}var l=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=10;o.EventEmitter2=o,o.prototype.delimiter=".",o.prototype.setMaxListeners=function(t){t!==e&&(this._events||i.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function i(){0===--t&&r.off(e,i),n.apply(this,arguments)}var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},o.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,s,o,c=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),c>3)for(t=new Array(c),s=0;s<c;s++)t[s]=arguments[s];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();a.call(this,o,l,this.listenerTree,0)}else{if(o=this._events[e],"function"==typeof o){switch(this.event=e,c){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(c-1),s=1;s<c;s++)t[s-1]=arguments[s];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(c>3)for(t=new Array(c-1),s=1;s<c;s++)t[s-1]=arguments[s];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},o.prototype.emitAsync=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,s,o,c=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),s=1;s<l;s++)t[s]=arguments[s];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,l){case 1:c.push(this._all[r].call(this,e));break;case 2:c.push(this._all[r].call(this,e,arguments[1]));break;case 3:c.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:c.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();a.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,l){case 1:c.push(o.call(this));break;case 2:c.push(o.call(this,arguments[1]));break;case 3:c.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),s=1;s<l;s++)t[s-1]=arguments[s];c.push(o.apply(this,t))}else if(o&&o.length){if(l>3)for(t=new Array(l-1),s=1;s<l;s++)t[s-1]=arguments[s];for(r=0,n=o.length;r<n;r++)switch(this.event=e,l){case 1:c.push(o[r].call(this));break;case 2:c.push(o[r].call(this,arguments[1]));break;case 3:c.push(o[r].call(this,arguments[1],arguments[2]));break;default:c.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},o.prototype.on=function(e,t){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||i.call(this),this.emit("newListener",e,t),this.wildcard?(c.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),this._events[e].push(t),!this._events[e].warned&&this._events.maxListeners>0&&this._events[e].length>this._events.maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this)},o.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(t,n){function i(t){if(t!==e){var n=Object.keys(t);for(var r in n){var s=n[r],o=t[s];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&i(t[s]),0===Object.keys(o).length&&delete t[s])}}}if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");var r,s=[];if(this.wildcard){var o="string"==typeof t?t.split(this.delimiter):t.slice();s=a.call(this,null,o,this.listenerTree,0)}else{if(!this._events[t])return this;r=this._events[t],s.push({_listeners:r})}for(var c=0;c<s.length;c++){var u=s[c];if(r=u._listeners,l(r)){for(var h=-1,f=0,v=r.length;f<v;f++)if(r[f]===n||r[f].listener&&r[f].listener===n||r[f]._origin&&r[f]._origin===n){h=f;break}if(h<0)continue;return this.wildcard?u._listeners.splice(h,1):this._events[t].splice(h,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this.emit("removeListener",t,n),this}(r===n||r.listener&&r.listener===n||r._origin&&r._origin===n)&&(this.wildcard?delete u._listeners:delete this._events[t],this.emit("removeListener",t,n))}return i(this.listenerTree),this},o.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,i=t.length;n<i;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||i.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=a.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var s=n[r];s._listeners=null}else this._events&&(this._events[e]=null);return this},o.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return a.call(this,t,n,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),l(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenerCount=function(e){return this.listeners(e).length},o.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof n?t.exports=o:window.EventEmitter2=o}()},{}],8:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,c=0;c<i;c++)l[c].apply(this,s);return!0},i.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;
1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],9:[function(e,t,n){t.exports=e("./lib/jquery-deferred")},{"./lib/jquery-deferred":12}],10:[function(e,t,n){function i(e){var t=o[e]={};return r.each(e.split(s),function(e,n){t[n]=!0}),t}var r=t.exports=e("./jquery-core.js"),s=/\s+/,o={};r.Callbacks=function(e){e="string"==typeof e?o[e]||i(e):r.extend({},e);var t,n,s,a,c,l,u=[],h=!e.once&&[],f=function(i){for(t=e.memory&&i,n=!0,l=a||0,a=0,c=u.length,s=!0;u&&l<c;l++)if(u[l].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}s=!1,u&&(h?h.length&&f(h.shift()):t?u=[]:v.disable())},v={add:function(){if(u){var n=u.length;!function t(n){r.each(n,function(n,i){var s=r.type(i);"function"===s?e.unique&&v.has(i)||u.push(i):i&&i.length&&"string"!==s&&t(i)})}(arguments),s?c=u.length:t&&(a=n,f(t))}return this},remove:function(){return u&&r.each(arguments,function(e,t){for(var n;(n=r.inArray(t,u,n))>-1;)u.splice(n,1),s&&(n<=c&&c--,n<=l&&l--)}),this},has:function(e){return r.inArray(e,u)>-1},empty:function(){return u=[],this},disable:function(){return u=h=t=void 0,this},disabled:function(){return!u},lock:function(){return h=void 0,t||v.disable(),this},locked:function(){return!h},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||n&&!h||(s?h.push(t):f(t)),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!n}};return v}},{"./jquery-core.js":11}],11:[function(e,t,n){function i(e){return null==e?String(e):h[u.call(e)]||"object"}function r(e){return"function"===l.type(e)}function s(e){return"array"===l.type(e)}function o(e,t,n){var i,s=0,o=e.length,a=void 0===o||r(e);if(n)if(a){for(i in e)if(t.apply(e[i],n)===!1)break}else for(;s<o&&t.apply(e[s++],n)!==!1;);else if(a){for(i in e)if(t.call(e[i],i,e[i])===!1)break}else for(;s<o&&t.call(e[s],s,e[s++])!==!1;);return e}function a(e){return!(!e||"object"!==l.type(e))}function c(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},a=2),"object"==typeof o||l.isFunction(o)||(o={}),c===a&&(o=this,--a);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(u&&i&&(l.isPlainObject(i)||(r=l.isArray(i)))?(r?(r=!1,s=n&&l.isArray(n)?n:[]):s=n&&l.isPlainObject(n)?n:{},o[t]=l.extend(u,s,i)):void 0!==i&&(o[t]=i));return o}var l=t.exports={type:i,isArray:s,isFunction:r,isPlainObject:a,each:o,extend:c,noop:function(){}},u=Object.prototype.toString,h={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(e){h["[object "+e+"]"]=e.toLowerCase()})},{}],12:[function(e,t,n){/*!
* jquery-deferred
* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
* MIT Licensed
*/
var i=t.exports=e("./jquery-callbacks.js"),r=Array.prototype.slice;i.extend({Deferred:function(e){var t=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return i.Deferred(function(n){i.each(t,function(t,r){var o=r[0],a=e[t];s[r[1]](i.isFunction(a)?function(){var e=a.apply(this,arguments);e&&i.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===s?n:this,[e])}:n[o])}),e=null}).promise()},promise:function(e){return null!=e?i.extend(e,r):r}},s={};return r.pipe=r.then,i.each(t,function(e,i){var o=i[2],a=i[3];r[i[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),s[i[0]]=o.fire,s[i[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,s,o=0,a=r.call(arguments),c=a.length,l=1!==c||e&&i.isFunction(e.promise)?c:0,u=1===l?e:i.Deferred(),h=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?r.call(arguments):s,i===t?u.notifyWith(n,i):--l||u.resolveWith(n,i)}};if(c>1)for(t=new Array(c),n=new Array(c),s=new Array(c);o<c;o++)a[o]&&i.isFunction(a[o].promise)?a[o].promise().done(h(o,s,a)).fail(u.reject).progress(h(o,n,t)):--l;return l||u.resolveWith(s,a),u.promise()}})},{"./jquery-callbacks.js":10}]},{},[3]);